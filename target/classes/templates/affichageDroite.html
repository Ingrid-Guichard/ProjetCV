<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Modifier mon CV</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="../static/js/bootstrap.min.js"></script>
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.png"/>

</head>
<body style="background-color: #FFFFFF;">
<div class="container-fluid">
    <div class="row">
        <div class="col-5">
            <form method="post" th:action="@{'/edit/'+${user.id}}" th:object="${user}">
                <div class="form-group">
                    <label for="firstNameInput">Prénom</label>
                    <input type="text" th:field="*{firstName}" class="form-control" id="firstNameInput"
                           th:value="${user.firstName}" required>
                </div>
                <div class="form-group">
                    <label for="lastNameInput">Nom de famille</label>
                    <input type="text" th:field="*{lastName}" class="form-control" id="lastNameInput"
                           th:value="${user.lastName}" required>
                </div>
                <div class="form-group">
                    <label for="ageInput">Age</label>
                    <input type="number" th:field="*{age}" class="form-control" id="ageInput" th:value="${user.age}"
                           required>
                </div>
                <div class="form-group">
                    <label for="addressInput">Adresse</label>
                    <input type="text" th:field="*{address}" class="form-control" id="addressInput"
                           th:value="${user.address}" required>
                </div>
                <div class="form-group">
                    <label for="jobStatusInput">Poste actuel ou recherché</label>
                    <input type="text" th:field="*{jobStatus}" class="form-control" id="jobStatusInput"
                           th:value="${user.jobStatus}" required>
                </div>
                <div class="form-group">
                    <label for="mailInput">Email</label>
                    <input type="email" th:field="*{mail}" class="form-control" id="mailInput" th:value="${user.mail}"
                           required>
                </div>
                <div class="form-group">
                    <div class="profile-picture-container">
                        <img id="previewProfilePic" src="/img/image_unavailable.png" alt="image unavailable"/>
                    </div>

                    <div class="input-group mb-3 upload-image">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroupFileAddon01">Photo de profil</span>
                        </div>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="inputGroupFile01" name="picture"
                                   onchange="readURL(this);" aria-describedby="inputGroupFileAddon01">
                            <label class="custom-file-label" for="inputGroupFile01">Choisir fichier</label>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Valider</button>
            </form>
        </div>
        <div class="col-7 border border-secondary" style="padding: 2em">
            <div class="row">
                <div class="col-5 justify-content-center text-center font-weight-light">
                    <div class="row">
                        <img th:if="${(user.photo != null && !#strings.isEmpty(user.photo))}"
                             th:src="@{${'/image/' + user.photo}}" class="rounded-circle" width="130" height="130"
                             alt="user photo">
                        <img th:if="${(user.photo == null || #strings.isEmpty(user.photo))}"
                             th:src="@{${'/img/default_user.jpg'}}" class="rounded-circle" width="130" height="130"
                             alt="user">

                    </div>

                    <br>

                    <!--enregistrer le nom directement en majuscules -->
                    <div class="row">
                        <h2 class="font-weight-light" th:text="${user.firstName}+' '+${user.lastName.toUpperCase()}"
                            style="color:#489fc2">Prénom NOM</h2>
                    </div>

                    <div class="row">
                        <table>
                            <tbody class="text-left">
                            <tr th:text="${user.age}">
                                <th>ans</th>
                            </tr>
                            <tr>
                                <th>Adresse:</th>
                                <td th:text="${user.address}">adresse</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row">
                        <table>
                            <tbody class="text-left">
                            <tr>
                                <th>Mail:</th>
                                <td th:text="${user.mail}">e-mail</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <br><br>

                    <!-- mettre un if la subsection langues n'est pas nulle, dans div row th:if="${subsection.language != null)}" -->
                    <div class="row">
                        <h4 class="font-weight-light" style="color:#489fc2">Langues</h4>
                    </div>
                    <div class="row">
                        <table>
                            <tbody>
                            <tr th:each="language : ${languages}">
                                <td scope="row" th:text="${language.name}"><b>Langue: </b></td>
                                <td th:text="${language.level}">niveau</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <br>

                    <!-- mettre un if la subsection skills n'est pas nulle, dans div row th:if="${subsection.skills != null)}" -->
                    <div class="row">
                        <h4 class="font-weight-light" style="color:#489fc2">Compétences</h4>
                    </div>
                    <div class="row">
                        <table>
                            <tbody>
                            <tr th:each="skill : ${skills}">
                                <td scope="row" th:text="${skill.name}"><b>Compétence: </b></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="col-7" style="padding-left: 3em">
                    <div class="row">
                        <h3 class="font-weight-light text-center" th:text="${user.jobStatus}" style="color:#489fc2">Job
                            status</h3>
                    </div>

                    <br><br>

                    <!-- mettre un if la subsection education n'est pas nulle, dans div row th:if="${subsection.education != null)}" -->
                    <div class="row">
                        <h4 class="font-weight-light" style="color:#489fc2">Formations</h4>
                        <table class="font-weight-light" style="width:100%">
                            <tbody>
                            <tr th:each="education : ${educations}">
                                <td style="width: 30%" scope="row"
                                    th:text=" ${education.startingDate} - ${education.finalDate}">debut - fin
                                </td>
                                <td th:text="${education.title}">Ecole</td>
                                <td scope="row"></td>
                                <td th:text="${education.place}">Lieu</td>
                                <td scope="row"></td>
                                <td th:text="${education.summary}"><b>Diplôme</b></td>
                            </tr>
                        </table>
                    </div>

                    <br>

                    <!-- mettre un if la subsection projects n'est pas nulle, dans div row th:if="${subsection.projects != null)}" -->
                    <div class="row">
                        <h4 class="font-weight-light" style="color:#489fc2">Projets</h4>
                        <ul class="font-weight-light" style="width:100%" th:each="project : ${projects}">
                            <li th:text="${project.title}"></li>
                            ${project.summary}
                        </ul>
                    </div>

                    <br>

                    <!-- mettre un if la subsection experience n'est pas nulle, dans div row th:if="${subsection.experience != null)}" -->
                    <div class="row">
                        <h4 class="font-weight-light" style="color:#489fc2">Expériences professionnelle</h4>
                        <table class="font-weight-light" style="width:100%">
                            <tbody>
                            <tr th:each="experience : ${experiences}">
                                <td style="width: 30%" scope="row"
                                    th:text=" ${experience.startingDate} - ${experience.finalDate}">debut - fin
                                </td>
                                <td th:text="${experience.place}"><b>Entreprise</b></td>
                                <td scope="row"></td>
                                <td th:text="${experience.title}">Poste</td>
                                <td scope="row"></td>
                                <td th:text="${experience.summary}">Description mission</td>
                            </tr>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>